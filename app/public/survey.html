<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" media="screen" title="no title">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title">
    <meta charset="utf-8">
    <title>Friend Finder Survey</title>
  </head>
  <body>
    <div class="container">
      <div class="jumbotron" id="surveytron">
        <h1 class="text-center">Survey</h1>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <form>
            <div id="name-group" class="form-group">
              <label>Name (required)</label>
              <input type="text" class="form-control" id="name" placeholder="Stanley Kowloski">
              <span id="name-span" aria-hidden="true"></span>
            </div>
            <div id="photo-group"class="form-group">
              <label>Link to Photograph (required)</label>
              <input type="text" class="form-control" id="photo" placeholder="www.photo.com/photo">
              <span id="photo-span" aria-hidden="true"></span>
            </div>
          </form>
        </div>
      </div>

      <hr id="survery-hr">

      <div class="row">
        <div class="col-xs-12">
          <div class="panel panel-default">
            <div class="panel-heading" id="panel-top"> Personality Test 1 implies strongly disagree, 5 implies strongly agree</div>
              <div class="panel-body">
                <form>
                  <div class="form-group">
                    <label>I would rather have a root canal than write javascript.</label>
                    <select class="form-control" id="q1">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>When I have free time, I go to the gym.</label>
                    <select class="form-control" id="q2">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>When I have free time, I read a book.</label>
                    <select class="form-control" id="q3">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Dead baby jokes are funny.</label>
                    <select class="form-control" id="q4">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I'm basically a geek.
                    <select class="form-control" id="q5">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I watch a lot of television.</label>
                    <select class="form-control" id="q6">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I like going to the beach.</label>
                    <select class="form-control" id="q7">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I read 5 novels a year</label>
                    <select class="form-control" id="q8">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I enjoy horror movies.</label>
                    <select class="form-control" id="q9">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>I always got good grades in school.</label>
                    <select class="form-control" id="q10">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                    </select>
                  </div>
                <!--  <input type="button" value="submit" class="btn btn-primary" id="button1"/> -->
                  <button type="submit" class="btn btn-primary" id="button1"> Submit</button> 
                </form>
              </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="modal" role="dialog">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h1 class="modal-title text-center">You have a match!</h1>
            </div>
            <div class="modal-body">
              <h1 id="match-name" class="text-center"></h1>
              <img src="" alt="" id="match-image" class="img-responsive">
              <h4 id="message" class="text-center"></h4>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    </div>
    <!-- for bicarre reason this does not work put it inline until solves -->
    <!-- <script type="text/javascript" src="script.js"/>-->
    <script>   
    var  tempc;
    var tempi = 0;
    var questions =["#q1","#q2","#q3","#q4","#q5","#q6","#q7","#q8","#q9","#q10"];
    var facts = {
       name: "",
       photo: "",
       scores: []
    }
    $('#button1').on("click",(function(event) { 
    event.preventDefault();
    facts.name = $('#name').val().trim();
    if (facts.nameo == "") {
      alert("name cannot be blank");
      return;
    }
    facts.photo = $('#photo').val().trim(); 
    if (facts.photo == "") {
      alert("photo cannot be blank");
      return;
    } 
    for (i=0;i<10;i++){
      tempc = $(questions[i]).val().trim();
      tempi = parseFloat(tempc);
      facts.scores.push(tempi);
      console.log(facts.scores[i]);
    }
    console.log("name = " + facts.name);
    console.log("photo = " + facts.photo);
    var currentURL = window.location.origin;
    console.log("currentURL = " + currentURL);
   // $.ajax({url:currentURL+"/api/data",method: "POST"})
   //   .done(function(data) {
   //     console.log("data = " + data);
   //     alert("Posting...");
   //   });
      $.post("/api/data", facts)
      .done(function(data) {
        console.log(data);
        alert("Posting...");
      });
      }));
    </script>  
  </body>
</html>